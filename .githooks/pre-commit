#!/usr/bin/env pwsh
# Pre-commit guard: prevent committing deprecated root-level files.
$Deprecated = @(
  'test_opencv_aios_integration.py',
  'test_chatgpt_integration.py',
  'setup_environment.ps1'
)
$staged = git diff --cached --name-only
$violations = @()
foreach ($f in $staged){
  if ($Deprecated -contains $f){ $violations += $f }
}
if ($violations.Count -gt 0){
  Write-Host "‚ùå Commit blocked: deprecated root files staged: $($violations -join ', ')" -ForegroundColor Red
  exit 1
}
exit 0
